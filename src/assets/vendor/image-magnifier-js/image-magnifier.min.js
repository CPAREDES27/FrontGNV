(function() {
    function e(e) {
        this.element = e, this.asset = this.element.getElementsByClassName("js-img-mag__asset")[0], this.ready = !1, this.scale = 1, this.intervalId = !1, this.moving = !1, this.moveEvent = !1,
            function(e) { e.asset.addEventListener("load", function() { t(e) }), e.asset.complete && t(e) }(this)
    }

    function t(e) {
        e.ready || (e.ready = !0, function(e) {
            var t = e.element.getAttribute("data-scale");
            t ? e.scale = t : (e.scale = e.asset.naturalWidth / e.element.offsetWidth, e.scale = Math.floor(100 * e.scale) / 100, 1.2 < e.scale && (e.scale = e.scale - .2))
        }(e), e.element.addEventListener("mouseenter", n.bind(e)));
    }

    function n(e) {
        switch (e.type) {
            case "mouseenter":
                ! function(e, t) {
                    e.moving = !0,
                        function(e) { e.moveEvent = n.bind(e), e.element.addEventListener("mousemove", e.moveEvent), e.element.addEventListener("mouseleave", e.moveEvent) }(e), i(e, t)
                }(this, e);
                break;
            case "mousemove":
                ! function(e, t) {
                    if (!e.moving || e.intervalId) return;
                    window.requestAnimationFrame ? e.intervalId = window.requestAnimationFrame(function() { i(e, t) }) : e.intervalId = setTimeout(function() { i(e, t) }, 250)
                }(this, e);
                break;
            case "mouseleave":
                ! function(e) {
                    e.moving = !1,
                        function(e) { e.intervalId && (window.requestAnimationFrame ? window.cancelAnimationFrame(e.intervalId) : clearInterval(e.intervalId), e.intervalId = !1), e.moveEvent && (e.element.removeEventListener("mousemove", e.moveEvent), e.element.removeEventListener("mouseleave", e.moveEvent), e.moveEvent = !1) }(e), e.asset.removeAttribute("style")
                }(this);
        }
    }

    function i(e, t) {
        var n = e.element.getBoundingClientRect(),
            i = n.left - t.clientX,
            a = n.top - t.clientY;
        0 < i && (i = 0), i < -1 * n.width && (i = -1 * n.width), 0 < a && (a = 0), a < -1 * n.height && (i = -1 * n.height);
        var s = "translateX(" + i * (e.scale - 1) + "px) translateY(" + a * (e.scale - 1) + "px) scale(" + e.scale + ")";
        e.asset.setAttribute("style", "transform: " + s + ";"), e.intervalId = !1;
    }
    var a = document.getElementsByClassName("js-img-mag");
    if (0 < a.length)
        for (var s = 0; s < a.length; s++) new e(a[s]);
})();